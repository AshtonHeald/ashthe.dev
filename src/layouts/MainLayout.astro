---
import BaseHead from "@/components/BaseHead.astro";
import Navigation from "@/components/Navigation.astro";
import Footer from "@/components/Footer.astro";

const { title, description, Heading, Subheading } = Astro.props;

import "@/styles/main.css";
---

<html lang="en">
    <head>
        <BaseHead title={title} description={description} />

        <script
            type="text/partytown"
            defer
            src="https://cloud.umami.is/script.js"
            data-website-id="22bfb4c7-8ee4-4e27-b54a-33a8c570ac90"></script>
        <script is:inline>
            function applyTheme(doc) {
                const stored = localStorage.getItem("vueuse-color-scheme");
                const prefersDark = window.matchMedia(
                    "(prefers-color-scheme: dark)",
                ).matches;

                if (stored === "auto" || (!stored && prefersDark)) {
                    doc.documentElement.classList.add("dark");
                } else {
                    doc.documentElement.classList.remove("dark");
                }
            }

            // Apply theme on initial load
            applyTheme(document);

            // Apply theme to the new document before each page swap
            document.addEventListener("astro:before-swap", (event) => {
                applyTheme(event.newDocument);
            });
        </script>
        <script>
            import "nprogress/nprogress.css";
            import NProgress from "nprogress";

            NProgress.configure({
                showSpinner: false,
                trickle: false,
                easing: "ease",
                speed: 1000,
            });

            document.addEventListener("astro:before-preparation", () => {
                NProgress.start();
            });

            document.addEventListener("astro:after-swap", () => {
                NProgress.done();
            });

            document.addEventListener("astro:page-load", () => {
                NProgress.done();
            });
        </script>
    </head>
    <body class="bg-background">
        <div id="container" class="">
            <Navigation />
            <main
                slide-enter
                class="slide-enter-content min-h-[calc(100dvh-188px)] p-4 md:p-8"
            >
                <slot />
            </main>
            <!--<Footer />-->

            <Footer />
        </div>
    </body>
</html>
