---
import { getCollection } from "astro:content";
import { formatDate } from "@/utils/formatDate";

const posts = (await getCollection("posts")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const recentPosts = posts.slice(0, 3);
---

<ul class="!list-none space-y-4 !pl-0">
  {
    recentPosts.map((post) => (
      <li>
        <a
          class="flex justify-between !border-b-0 !transition-all hover:opacity-60"
          href={`/blog/${post.id}`}
        >
          <span>{post.data.title}</span>
          <span class="text-muted-foreground text-sm">
            {" "}
            {formatDate(post.data.pubDate, { month: true, year: true })}
          </span>
        </a>
      </li>
    ))
  }
</ul>
